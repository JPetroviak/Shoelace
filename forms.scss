// Forms
fieldset {
	border: none;
	margin: 0;
	min-width: 0;
	padding: 0;
}

legend {
	border: 0;
	padding: 0;
}

.form-group {
	.input-field {
		margin-bottom: $padding;

		+ .input-helper {
			margin-top: -$padding-small;
		}
	}

	.button {
		margin-bottom: $padding;
	}

	.radio {
		+ label {
			margin-bottom: $padding-small;
		}
	}

	.checkbox {
		+ label {
			margin-bottom: $padding-small;
		}
	}

	&.large {
		.input-field {
			@if $form-border-radius-large != $form-border-radius {
				border-radius: $form-border-radius-large;
			}
			@if $form-border-width-large != $form-border-width {
				border-width: $form-border-width-large;
			}
			font-size: $font-size-large;
			padding: $form-padding-vertical-large $form-padding-horizontal-large;
		}

		.button {
			@if $form-border-radius-large != $form-border-radius {
				border-radius: $form-border-radius-large;
			}
			@if $form-border-width-large != $form-border-width {
				border-width: $form-border-width-large;
			}
			font-size: $font-size-large;
			padding: $form-padding-vertical-large $form-padding-horizontal-large;
		}

		.radio + label:before {
			@if $form-border-width-large != $form-border-width {
				border-width: $form-border-width-large;
			}
			height: $radio-size-large;
			width: $radio-size-large;
		}

		.checkbox + label:before {
			@if $form-border-radius-large != $form-border-radius {
				border-radius: $form-border-radius-large;
			}
			@if $form-border-width-large != $form-border-width {
				border-width: $form-border-width-large;
			}
			height: $checkbox-size-large;
			width: $checkbox-size-large;
		}
	}

	&.small {
		.input-field {
			@if $form-border-radius-small != $form-border-radius {
				border-radius: $form-border-radius-small;
			}
			@if $form-border-width-small != $form-border-width {
				border-width: $form-border-width-small;
			}
			font-size: $font-size-small;
			padding: $form-padding-vertical-small $form-padding-horizontal-small;
		}

		.button {
			@if $form-border-radius-small != $form-border-radius {
				border-radius: $form-border-radius-small;
			}
			@if $form-border-width-small != $form-border-width {
				border-width: $form-border-width-small;
			}
			font-size: $font-size-small;
			padding: $form-padding-vertical-small $form-padding-horizontal-small;
		}

		.radio + label:before {
			@if $form-border-width-small != $form-border-width {
				border-width: $form-border-width-small;
			}
			height: $radio-size-small;
			width: $radio-size-small;
		}

		.checkbox + label:before {
			@if $form-border-radius-small != $form-border-radius {
				border-radius: $form-border-radius-small;
			}
			@if $form-border-width-small != $form-border-width {
				border-width: $form-border-width-small;
			}
			height: $checkbox-size-small;
			width: $checkbox-size-small;
		}
	}
}

.form-inline .input-field {
	width: auto;
}

optgroup {
	font-weight: bold;
}

label {
  display: inline-block;
  
  &.label {
  	@if $form-label-color != $color-default {
  		color: $form-label-color;
  	}
    margin-bottom: $padding-extra-small;
    touch-action: manipulation;
    -webkit-user-select: none;

    &.required:after {
      color: $form-label-required-color;
      content: '*';
      margin-left: $padding-extra-small;
    }
  }
}

input[type="number"] {
	&::-webkit-inner-spin-button, &::-webkit-outer-spin-button {
		height: auto;
	}
}

input[type="search"] {
	&::-webkit-search-cancel-button, &::-webkit-search-decoration {
		-webkit-appearance: none;
	}
}

textarea {
	overflow: auto;
	resize: vertical;
}

.input-field {
	appearance: none;
	background-color: $form-background-color;
	@if $form-border {
		border: $form-border-width $form-border-style $form-border-color;
	}
	@else {
		border: none;
	}
	border-radius: $form-border-radius;
	color: $color-default;
	font-family: $font-family;
	font-size: $font-size;
	line-height: $line-height;
	margin: 0;
	padding: $form-padding-vertical $form-padding-horizontal;
	touch-action: manipulation;
	@if $form-transitions {
		transition: border-color $form-transition-speed $form-transition-property, background-image $form-transition-speed $form-transition-property;
	}
	width: 100%;

	&::placeholder {
		color: $color-default-lighter;
		opacity: 1;
	}

	@if $form-hover {
		&:hover {
			border-color: $form-hover-color;
		}
	}

	&:focus {
		@if $form-focus {
			@if $form-border {
				border-color: $form-focus-color;
			}
		}
		outline: 0;
	}

	&::-moz-focus-inner {
		border: 0;
		padding: 0;
	}

	&.large {
		@if $form-border-radius-large != $form-border-radius {
			border-radius: $form-border-radius-large;
		}
		@if $form-border-width-large != $form-border-width {
			border-width: $form-border-width-large;
		}
		font-size: $font-size-large;
		padding: $form-padding-vertical-large $form-padding-horizontal-large;
	}

	&.small {
		@if $form-border-radius-small != $form-border-radius {
			border-radius: $form-border-radius-small;
		}
		@if $form-border-width-small != $form-border-width {
			border-width: $form-border-width-small;
		}
		font-size: $font-size-small;
		padding: $form-padding-vertical-small $form-padding-horizontal-small;
	}

	option:disabled {
		color: $color-default-lighter;
	}

	&:disabled {
		background-color: $color-default-lightest;
		@if $form-border {
			border-color: $form-border-color;
		}
		cursor: not-allowed;
		opacity: 1;
		-webkit-user-select: none;
	}

	&.error {
		@if $form-error-background-color {
			background-color: $form-error-background-color;
		}
		@if $form-border {
			@if $form-error-border-color {
				border-color: $form-error-border-color;
			}
		}
	}
}

@function url-friendly-color($color) {
	@return '%23' + str-slice('#{$color}', 2, -1);
}

select.input-field {
	background: no-repeat right $padding-small center;
	background-image: url('data:image/svg+xml,<svg%20width%3D"10"%20height%3D"5"%20viewBox%3D"169%20177%2010%205"%20xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"><path%20fill%3D"#{url-friendly-color($form-border-color)}"%20fill-rule%3D"evenodd"%20d%3D"M174%20182l5-5h-10"%2F><%2Fsvg>');
	background-size: $padding-small $padding-extra-small;
	padding-right: $padding + $padding-small;

	@if $form-hover {
		&:hover {
			background-image: url('data:image/svg+xml,<svg%20width%3D"10"%20height%3D"5"%20viewBox%3D"169%20177%2010%205"%20xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"><path%20fill%3D"#{url-friendly-color($form-hover-color)}"%20fill-rule%3D"evenodd"%20d%3D"M174%20182l5-5h-10"%2F><%2Fsvg>');
		}
	}

	&:focus {
		@if $form-focus {
			background-image: url('data:image/svg+xml,<svg%20width%3D"10"%20height%3D"5"%20viewBox%3D"169%20177%2010%205"%20xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"><path%20fill%3D"#{url-friendly-color($form-focus-color)}"%20fill-rule%3D"evenodd"%20d%3D"M174%20182l5-5h-10"%2F><%2Fsvg>');
		}
	}
}

.input-helper {
	color: $form-helper-color;
	margin-top: $padding-small;
	margin-bottom: $padding;

	&.error {
		color: $form-helper-error-color;
	}
}

[role="button"] {
	cursor: pointer;
}

button {
	border-radius: 0;
	margin: 0;
	overflow: visible;

	&:focus {
		outline: 0;
	}

	&::-moz-focus-inner {
		border: 0;
		margin: 0;
		padding: 0;
	}
}

.button {
	background-color: $color-default-lighter;
	@if $form-border {
		border: $form-border-width $form-border-style $form-border-color;
	}
	@else {
		border: none;
	}
	border-radius: $form-border-radius;
	color: $color-default;
	cursor: pointer;
	display: inline-block;
	font-family: $font-family;
	font-size: $font-size;
	line-height: $line-height;
	padding: $form-padding-vertical $form-padding-horizontal;
	text-align: center;
	text-decoration: none;
	@if $form-transitions {
		transition: background-color $form-transition-speed $form-transition-property, border-color $form-transition-speed $form-transition-property;
	}
	touch-action: manipulation;
	-webkit-user-select: none;

	&.large {
		@if $form-border-radius-large != $form-border-radius {
			border-radius: $form-border-radius-large;
		}
		@if $form-border-width-large != $form-border-width {
			border-width: $form-border-width-large;
		}
		font-size: $font-size-large;
		padding: $form-padding-vertical-large $form-padding-horizontal-large;
	}

	&.small {
		@if $form-border-radius-small != $form-border-radius {
			border-radius: $form-border-radius-small;
		}
		@if $form-border-width-small != $form-border-width {
			border-width: $form-border-width-small;
		}
		font-size: $font-size-small;
		padding: $form-padding-vertical-small $form-padding-horizontal-small;
	}

	&.full {
		width: 100%;
	}

	@if $form-hover {
		&:hover {
			background-color: darken($color-default-lighter, 10%);
			border-color: darken($color-default-lighter, 10%);
		}
	}

	@if $form-focus {
		&:focus, &:active {
			background-color: darken($color-default-lighter, 20%);
			border-color: darken($color-default-lighter, 20%);
		}
	}

	&:disabled {
		background-color: $color-default-lighter;
		border-color: $color-default-lighter;
		color: $color-default;
	}

	@each $class, $color in $colors {
		&.#{$class} {
			background-color: $color;
			border-color: $color;
			color: $background-color-default;

			@if $form-hover {
				&:hover {
					background-color: darken($color, 10%);
					border-color: darken($color, 10%);
				}
			}

			@if $form-focus {
				&:focus, &:active {
					background-color: darken($color, 20%);
					border-color: darken($color, 20%);
				}
			}

			&:disabled {
				background-color: $color;
				border-color: $color;
			}
		}
	}

	&.inverted {
		background-color: $form-background-color;
		border-color: $color-default-lighter;
		color: $color-default;
		@if $form-transitions {
			transition: background-color $form-transition-speed $form-transition-property, color $form-transition-speed $form-transition-property;
		}

		@if $form-hover {
			&:hover {
				background-color: $color-default-lighter;
			}
		}

		@if $form-focus {
			&:focus, &:active {
				background-color: $color-default-lighter;
			}
		}

		&:disabled {
			background-color: $form-background-color;
			color: $color-default;
		}

		@each $class, $color in $colors {
			&.#{$class} {
				border-color: $color;
				color: $color;

				@if $form-hover {
					&:hover {
						background-color: $color;
						color: $background-color-default;
					}
				}

				@if $form-focus {
					&:focus, &:active {
						background-color: $color;
						color: $background-color-default;
					}
				}

				&:disabled {
					background-color: $form-background-color;
					color: $color;
				}
			}
		}
	}

	&:disabled {
		cursor: not-allowed;
		opacity: .5;
	}
}

.radio {
	display: none;

	+ label {
		cursor: pointer;
		touch-action: manipulation;
		-webkit-user-select: none;

		&:before {
			background-color: $form-background-color;
			@if $form-border {
				border: $form-border-width $form-border-style $form-border-color;
			}
			border-radius: 50%;
			content: '';
			display: inline-block;
			height: $radio-size;
			margin-bottom: -$padding-extra-small;
			margin-right: $padding-extra-small;
			@if $form-transitions {
				transition: background-color $form-transition-speed $form-transition-property, border-color $form-transition-speed $form-transition-property, box-shadow $form-transition-speed $form-transition-property;
			}
			width: $radio-size;
		}

		&.required:after {
			color: $form-error-color;
			content: '*';
			margin-left: $padding-extra-small;
		}

		@if $form-hover {
			&:hover:before {
				border-color: $form-hover-color;
			}
		}
	}

	&.large + label:before {
		@if $form-border-width-large != $form-border-width {
			border-width: $form-border-width-large;
		}
		height: $radio-size-large;
		width: $radio-size-large;
	}

	&.small + label:before {
		@if $form-border-width-small != $form-border-width {
			border-width: $form-border-width-small;
		}
		height: $radio-size-small;
		width: $radio-size-small;
	}

	&:checked + label:before {
		background-color: $form-checked-color;
		border-color: $form-checked-color;
		box-shadow: inset 0 0 0 2px $form-background-color;
	}

	&:disabled + label {
		cursor: not-allowed;
		-webkit-user-select: none;

		&:before {
			background-color: $color-default-lightest;

			@if $form-border {
				border-color: $form-border-color;
			}
		}
	}

	&.error + label:before {
		@if $form-error-background-color {
			background-color: $form-error-background-color;
		}
		@if $form-border {
			@if $form-error-border-color {
				border-color: $form-error-border-color;
			}
		}
	}
}

.checkbox {
	display: none;

	+ label {
		cursor: pointer;
		touch-action: manipulation;
		-webkit-user-select: none;

		&:before {
			background-color: $form-background-color;
			@if $form-border {
				border: $form-border-width $form-border-style $form-border-color;
			}
			@if $form-border-radius > 0 {
				border-radius: $form-border-radius;
			}
			content: '';
			display: inline-block;
			height: $checkbox-size;
			margin-bottom: -$padding-extra-small;
			margin-right: $padding-extra-small;
			@if $form-transitions {
				transition: background-color $form-transition-speed $form-transition-property, border-color $form-transition-speed $form-transition-property, box-shadow $form-transition-speed $form-transition-property;
			}
			width: $checkbox-size;
		}

		@if $form-hover {
			&:hover:before {
				border-color: $form-hover-color;
			}
		}

		&.required:after {
			color: $form-label-required-color;
			content: '*';
			margin-left: $padding-extra-small;
		}
	}

	&.large + label:before {
		@if $form-border-radius-large != $form-border-radius {
			border-radius: $form-border-radius-large;
		}
		@if $form-border-width-large != $form-border-width {
			border-width: $form-border-width-large;
		}
		height: $checkbox-size-large;
		width: $checkbox-size-large;
	}

	&.small + label:before {
		@if $form-border-radius-small != $form-border-radius {
			border-radius: $form-border-radius-small;
		}
		@if $form-border-width-small != $form-border-width {
			border-width: $form-border-width-small;
		}
		height: $checkbox-size-small;
		width: $checkbox-size-small;
	}

	&:checked + label:before {
		background-color: $form-checked-color;
		border-color: $form-checked-color;
		box-shadow: inset 0 0 0 2px $form-background-color;
	}

	&:disabled + label {
		cursor: not-allowed;
		-webkit-user-select: none;

		&:before {
			background-color: $color-default-lightest;
			@if $form-border {
				border-color: $form-border-color;
			}
		}
	}

	&.error + label:before {
		@if $form-error-background-color {
			background-color: $form-error-background-color;
		}
		@if $form-border {
			@if $form-error-border-color {
				border-color: $form-error-border-color;
			}
		}
	}
}